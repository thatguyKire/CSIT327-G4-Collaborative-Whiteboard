{% extends "core/base.html" %}
{% load static %}

{% block title %}Student Whiteboard - COLLABoard{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'session/css/whiteboard.css' %}">
<link rel="stylesheet" href="{% static 'session/css/upload.css' %}">

<div class="whiteboard-wrapper">
  <h2 class="session-title">{{ session_title }}</h2>

  <div class="whiteboard-container">
    <canvas id="whiteboardCanvas" role="application" aria-label="Student Whiteboard"></canvas>

    {% if can_draw %}
      <div class="toolbar" role="toolbar">
        <button id="penBtn" class="btn btn-secondary active">Pen</button>
        <button id="eraserBtn" class="btn btn-secondary">Eraser</button>

        <label for="colorPicker">🖍️ Color:</label>
        <input type="color" id="colorPicker" value="#000000">

        <label for="sizePicker">✏️ Size:</label>
        <input type="range" id="sizePicker" min="1" max="20" value="3">

        <!-- 🗂️ Upload Section -->
        <div class="upload-section">
          <label for="fileInput" class="btn btn-secondary">📁 Upload File</label>
          <input type="file" id="fileInput" accept="image/*,.pdf,.docx,.pptx" hidden>
          <div id="uploadStatus" class="upload-status"></div>
          <ul id="uploadedFiles" class="uploaded-files"></ul>
        </div>
      </div>
    {% else %}
      <div class="toolbar readonly-toolbar">
        👀 Read-only mode — drawing & upload disabled.
      </div>
    {% endif %}
  </div>
</div>

{% if snapshot_url %}
  <img id="snapshotImg" src="{{ snapshot_url }}" alt="snapshot" style="display:none;">
{% endif %}

{% if can_draw %}
  <script src="{% static 'session/js/upload.js' %}" defer></script>
{% endif %}
<script src="{% static 'session/js/whiteboard.js' %}"></script>
{% endblock %}
