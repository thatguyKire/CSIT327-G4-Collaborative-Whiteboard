{% extends "core/base.html" %}

{% load static %}
{% block title %}Student Whiteboard - COLLABoard{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'session/css/whiteboard.css' %}">

<div class="whiteboard-wrapper">
  <h2 class="session-title">{{ session_title }}</h2>

  <div class="whiteboard-container">
    <canvas id="whiteboardCanvas" role="application" aria-label="Student Whiteboard"></canvas>

    {% if can_draw %}
      <div class="toolbar" role="toolbar" aria-label="Drawing tools">
        <button id="penBtn" class="btn btn-secondary active" aria-pressed="true">Pen</button>
        <button id="eraserBtn" class="btn btn-secondary" aria-pressed="false">Eraser</button>

        <label for="colorPicker">🖍️ Color:</label>
        <input type="color" id="colorPicker" value="#000000">

        <label for="sizePicker">✏️ Size:</label>
        <input type="range" id="sizePicker" min="1" max="20" value="3">
      </div>
    {% else %}
      <div class="toolbar" style="background:#f0f0f0; text-align:center; justify-content:center;">
        <p><strong>👀 Read-only mode:</strong> Drawing is disabled for this user.</p>
      </div>
    {% endif %}
  </div>
</div>

{% if snapshot_url %}
  <img id="snapshotImg" src="{{ snapshot_url }}" alt="snapshot" style="display:none;">
{% endif %}

<body data-can-draw="{{ can_draw|default_if_none:False|yesno:"true,false" }}">
  ...
  <script src="{% static 'session/js/student_whiteboard.js' %}"></script>
</body>

{% if can_draw %}
  <script src="{% static 'session/js/whiteboard.js' %}"></script>
{% else %}
  <script src="{% static 'session/js/student_whiteboard.js' %}"></script>
{% endif %}
{% endblock %}
