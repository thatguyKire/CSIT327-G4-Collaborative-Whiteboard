{% extends "core/base.html" %}
{% load static %}

{% block title %}Student Dashboard - COLLABoard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
{% endblock %}

{% block content %}
<section class="dashboard-wrapper">
  <div class="dashboard-intro">
    <h1>Hello there, {{ user.username|default:"" }}!</h1>
    <p>Welcome to your student dashboard. You can join a session using a code.</p>
  </div>

  <div class="sessions-row">
    <a href="{% url 'join_session' %}" class="session-card" aria-label="Join a session">
      <img src="{% static 'core/icons/plus.png' %}" alt="Join session" class="icon-plus">
      <p class="session-label">Join Session</p>
    </a>
  </div>

  {% if joined_sessions %}
  <h2 style="margin-top:20px;">Your Joined Sessions</h2>
  <ul class="session-list">
    {% for s in joined_sessions %}
      <li>
        <strong>{{ s.session.title }}</strong> â€” Code: {{ s.session.code }}
        <a href="{% url 'whiteboard' s.session.id %}" class="btn btn-primary">Open</a>
      </li>
    {% empty %}
      <li>No active sessions yet. Join one to get started!</li>
    {% endfor %}
  </ul>
  {% endif %}

  <!-- Graph / analytics section (placeholder) -->

</section>


{{ student_perf_chart|json_script:"student_perf_data" }}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="{% static 'dashboard/js/participation_chart.js' %}"></script>
{% endblock %}
